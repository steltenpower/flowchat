<!doctype html>
<html lang="en" style="width:100%;height:100%;"><head><title>faking interaction</title>
<script>
svgNS="http://www.w3.org/2000/svg";
drawing=false;
function drawNode(ev,elmId){
	var newNode = document.createElementNS(svgNS,"circle");
	var l=ev.changedTouches.length;
	var e=ev.changedTouches[l-1];
	var x=e.pageX;
	var y=e.pageY;
	newNode.setAttribute("id",elmId);
	newNode.setAttribute("fill","grey");
	newNode.setAttribute("r",100);
	newNode.setAttribute("cx",x);
	newNode.setAttribute("cy",y);
	var svg=document.getElementsByTagName("svg")[0];
	svg.appendChild(newNode);
}
function drawEdge(ev){
	var newNode = document.createElementNS("http://www.w3.org/2000/svg","line")
		.setAttribute("fill","grey")
		.setAttribute("id","R")
		.setAttribute("x1",ev.touches[0].pageX).setAttribute("y1",ev.touches[0].pageY)
		.setAttribute("x2",ev.touches[1].pageX).setAttribute("y2",ev.touches[1].pageY);
	document.appendChild(newNode);
}
function startRecording(elmId){
	// TODO future start audio recording on audiofragment elmId
	document.getElementById(elmId)
		.setAttribute("fill","red");
}
function stopRecording(elmId){
	// TODO future stop audio recording on audiofragment elmId
	var temp=document.getElementById(elmId);
	temp.setAttribute("fill","black");
}
function startshowingResults(elmId){
	// add a 'dropdown' that keeps growing for a while
}
// ...
function startNodeA(ev){
	drawing=true;
	drawNode(ev,"A");
	startRecording("A");
}
function completeNodeA_startEdge(ev){
	if (drawing){
		stopRecording("A");
		startshowingResults("A");
		startRecording("R");
		drawNode(ev,"B");
		drawEdge(ev);
	}
}
function completeEdge_startNodeB(ev){
	drawing=false;
	stopRecording("R");
	startshowingResults("R");
	startRecording("B");
}
function completeNodeB(){
	stopRecording("B");
	startshowingResults("B");
	//addTripleToGraph()
}
document.addEventListener('mousedown', startNodeA, false);
document.addEventListener('mousemove', completeNodeA_startEdge, false);
document.addEventListener('mouseup', completeEdge_startNodeB, false);
document.addEventListener('keydown', completeNodeB, false);
</script>
</head>
<body style="width:100%;height:100%;margin:0;"><svg width="100%" height="100%"></svg></body></html>
