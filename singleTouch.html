<!doctype html>
<html lang="en" style="width:100%;height:100%;"><head><title>faking interaction</title>
<script>
svgNS="http://www.w3.org/2000/svg";
drawing=false;
stretching=false;
x1=0;
y1=0;
function drawTriple_listenForA(ev){
	x1=ev.x;
	y1=ev.y;
	var translate="translate("+x1+","+y1+")";
	var triple=document.getElementById("triple");
	triple.setAttribute("transform",translate);
	triple.setAttribute("visibility","visible");
	drawing=true;
	startRecording("A");
}
function stretchTriple_listenForR(ev){
	if (drawing){
		if (!stretching){
			stopRecording("A")
			startRecording("R")
			stretching=true;
		}else{
			var x2=ev.x-x1;
			var y2=ev.y-y1;
			var R=document.getElementById("R");
			R.setAttribute("x2",x2);
			R.setAttribute("y2",y2);
			var B=document.getElementById("B");
			B.setAttribute("cx",x2);
			B.setAttribute("cy",y2);
		}
	}
}
function listenForB(ev){
	stopRecording("R");
	startRecording("B");
}
function completeB(ev){
	stopRecording("B");
	drawing=false;
}
// ...	
function startRecording(elmId){
	// TODO future start audio recording on audiofragment elmId
	console.log("recording of "+elmId+" started");
	document.getElementById(elmId)
		.setAttribute("stroke","red");
}
function stopRecording(elmId){
	// TODO future stop audio recording on audiofragment elmId
	console.log("recording of "+elmId+" ended");
	document.getElementById(elmId).setAttribute("stroke","black");
	startShowingResults(elmId);
}
function startShowingResults(elmId){
	console.log("showing results for finished recording of "+elmId);
}
// ...
document.addEventListener('mousedown', drawTriple_listenForA, false);
document.addEventListener('mousemove', stretchTriple_listenForR, false);
document.addEventListener('mouseup', listenForB, false);
document.addEventListener('keydown', completeB, false);
</script>
</head>
<body style="width:100%;height:100%;margin:0;"><svg width="100%" height="100%"><g id="triple" visibility="hidden" fill="grey" stroke="grey" stroke-width="10">
	<circle id="B" r="100" />
	<line id="R" /><!-- TODO marker-end -->
	<circle id="A" r="100" />
</g></svg></body></html>
