<!doctype html>
<html lang="en" style="width:100%;height:100%;"><head><title>faking interaction</title>
<script>
svgNS="http://www.w3.org/2000/svg";
drawing=false;
A_x=undefined;
A_y=undefined;
function drawNode(ev,elmId){
	A_x=ev.clientX;
	A_y=ev.clientY;
	var newNode = document.createElementNS(svgNS,"circle");
	newNode.setAttribute("id",elmId);
	newNode.setAttribute("fill","grey");
	newNode.setAttribute("r",100);
	newNode.setAttribute("cx",A_x);
	newNode.setAttribute("cy",A_y);
	var svg=document.getElementsByTagName("svg")[0];
	svg.appendChild(newNode);
}
function drawEdge(ev){
	B_x=ev.clientX;
	B_y=ev.clientY;
	var newNode = document.createElementNS(svgNS,"line");
		newNode.setAttribute("fill","grey");
		newNode.setAttribute("id","R");
		newNode..setAttribute("x1",A_x).setAttribute("y1",A_y);
		newNode.setAttribute("x2",B_x).setAttribute("y2",B_y);
	document.appendChild(newNode);
}
function startRecording(elmId){
	// TODO future start audio recording on audiofragment elmId
	document.getElementById(elmId)
		.setAttribute("fill","red");
}
function stopRecording(elmId){
	// TODO future stop audio recording on audiofragment elmId
	var temp=document.getElementById(elmId);
	temp.setAttribute("fill","black");
}
function startshowingResults(elmId){
	// add a 'dropdown' that keeps growing for a while
}
// ...
function startNodeA(ev){
	drawing=true;
	drawNode(ev,"A");
	startRecording("A");
}
function completeNodeA_startEdge(ev){
	if (drawing){
		stopRecording("A");
		startshowingResults("A");
		drawEdge(ev);
		startRecording("R");
		drawNode(ev,"B");
	}
}
function completeEdge_startNodeB(ev){
	drawing=false;
	stopRecording("R");
	startshowingResults("R");
	startRecording("B");
}
function completeNodeB(){
	stopRecording("B");
	startshowingResults("B");
	//addTripleToGraph()
}
document.addEventListener('mousedown', startNodeA, false);
document.addEventListener('mousemove', completeNodeA_startEdge, false);
document.addEventListener('mouseup', completeEdge_startNodeB, false);
document.addEventListener('keydown', completeNodeB, false);
</script>
</head>
<body style="width:100%;height:100%;margin:0;"><svg width="100%" height="100%"></svg></body></html>
